{% extends 'layouts/main.html' %}

{% block title %}
Schedule Listing &ndash; MyBnB
{% endblock %}

{% block top %}

<div class="d-flex flex-column mb-4">
  <a class="btn btn-outline-primary" href="/my-listings">‚Üê My Listings</a>
</div>

<h1>Schedule Listing</h1>

<p>{{ listing.type }} in {{ listing.city }} at {{ listing.postal }}</p>

{% endblock %}

{% block content %}

<ul class="ps-0">
  {% for slot in slots %}
    <li class="card">
      <div class="card-body d-flex flex-row align-items-baseline justify-content-between">
        <h6 class="card-title">
          {% if slot.rental_price == None %}
            <span class="text-danger">{{ slot.date }} &ndash; Unavailable</span>
          {% else %}
            <span class="text-success">{{ slot.date }} &ndash; {{ "${:,.0f}".format(slot.rental_price) }}/night</span>
          {% endif %}
        </h6>
        <form class="btn-group ms-4">
          {% if slot.rental_price == None %}
            <a href="/my-listings/{{ listing.id }}/schedule/{{ slot.id }}/set-price" class="btn btn-sm btn-outline-success ps-3 pe-3">Set Price</a>
            <button type="submit" formaction="/my-listings/{{ listing.id }}/schedule/{{ slot.id }}/delete" formmethod="POST" class="btn btn-sm btn-outline-dark ps-3 pe-3">Delete</a>
          {% else %}
            <a href="/my-listings/{{ listing.id }}/schedule/{{ slot.id }}/set-price" class="btn btn-sm btn-outline-dark ps-3 pe-3">Change Price</a>
            <button type="submit" formaction="/my-listings/{{ listing.id }}/schedule/{{ slot.id }}/retract" formmethod="POST" class="btn btn-sm btn-outline-danger ps-3 pe-3">Retract</a>
          {% endif %}
        </form>
      </div>
    </li>
  {% endfor %}
</ul>

{% endblock %}
